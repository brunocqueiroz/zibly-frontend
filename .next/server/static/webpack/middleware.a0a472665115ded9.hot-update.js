"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./auth.ts":
/*!*****************!*\
  !*** ./auth.ts ***!
  \*****************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   handlers: () => (/* binding */ handlers),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(middleware)/./node_modules/.pnpm/next-auth@5.0.0-beta.28_next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0__react@19.1.0/node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(middleware)/./node_modules/.pnpm/next-auth@5.0.0-beta.28_next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0__react@19.1.0/node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/google */ \"(middleware)/./node_modules/.pnpm/next-auth@5.0.0-beta.28_next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0__react@19.1.0/node_modules/next-auth/providers/google.js\");\n\n\n\nconst config = {\n    providers: [\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        }),\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                try {\n                    // Call your Python backend\n                    const response = await fetch(`${process.env.BACKEND_URL || 'http://localhost:8000'}/auth/login`, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            email: credentials.email,\n                            password: credentials.password\n                        })\n                    });\n                    if (!response.ok) {\n                        return null;\n                    }\n                    const data = await response.json();\n                    // Return user object that will be stored in JWT\n                    return {\n                        id: data.user.id,\n                        email: data.user.email,\n                        name: data.user.name,\n                        role: data.user.role,\n                        company: data.user.company,\n                        // Store backend tokens for later use\n                        accessToken: data.tokens.access_token,\n                        refreshToken: data.tokens.refresh_token\n                    };\n                } catch (error) {\n                    console.error('Auth error:', error);\n                    return null;\n                }\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\",\n        maxAge: 7 * 24 * 60 * 60\n    },\n    callbacks: {\n        async jwt ({ token, user, account }) {\n            // Initial sign in\n            if (account && user) {\n                return {\n                    ...token,\n                    accessToken: user.accessToken,\n                    refreshToken: user.refreshToken,\n                    role: user.role,\n                    company: user.company\n                };\n            }\n            // Return previous token if the access token has not expired yet\n            return token;\n        },\n        async session ({ session, token }) {\n            // Send properties to the client\n            return {\n                ...session,\n                user: {\n                    ...session.user,\n                    id: token.sub,\n                    role: token.role,\n                    company: token.company\n                },\n                accessToken: token.accessToken\n            };\n        }\n    },\n    pages: {\n        signIn: '/login'\n    },\n    debug: \"development\" === 'development'\n};\nconst { handlers, auth, signIn, signOut } = (0,next_auth__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(config);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLEVBQUVILE1BQU0sRUFBRUksT0FBTyxFQUFFLEdBQUdyRCxxREFBUUEsQ0FBQ0csUUFBTyIsInNvdXJjZXMiOlsiL1VzZXJzL2JydW5vL0RvY3VtZW50cy96aWJseS1mcm9udGVuZC9hdXRoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOZXh0QXV0aCBmcm9tIFwibmV4dC1hdXRoXCJcbmltcG9ydCBDcmVkZW50aWFscyBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiXG5pbXBvcnQgR29vZ2xlIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZVwiXG5pbXBvcnQgdHlwZSB7IE5leHRBdXRoQ29uZmlnIH0gZnJvbSBcIm5leHQtYXV0aFwiXG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIEdvb2dsZSh7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCxcbiAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQsXG4gICAgfSksXG4gICAgQ3JlZGVudGlhbHMoe1xuICAgICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDYWxsIHlvdXIgUHl0aG9uIGJhY2tlbmRcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3Byb2Nlc3MuZW52LkJBQ0tFTkRfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDAnfS9hdXRoL2xvZ2luYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwsXG4gICAgICAgICAgICAgIHBhc3N3b3JkOiBjcmVkZW50aWFscy5wYXNzd29yZCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXR1cm4gdXNlciBvYmplY3QgdGhhdCB3aWxsIGJlIHN0b3JlZCBpbiBKV1RcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgICAgICBuYW1lOiBkYXRhLnVzZXIubmFtZSxcbiAgICAgICAgICAgIHJvbGU6IGRhdGEudXNlci5yb2xlLFxuICAgICAgICAgICAgY29tcGFueTogZGF0YS51c2VyLmNvbXBhbnksXG4gICAgICAgICAgICAvLyBTdG9yZSBiYWNrZW5kIHRva2VucyBmb3IgbGF0ZXIgdXNlXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogZGF0YS50b2tlbnMuYWNjZXNzX3Rva2VuLFxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiBkYXRhLnRva2Vucy5yZWZyZXNoX3Rva2VuLFxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRoIGVycm9yOicsIGVycm9yKVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICBdLFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXG4gICAgbWF4QWdlOiA3ICogMjQgKiA2MCAqIDYwLCAvLyA3IGRheXNcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIsIGFjY291bnQgfSkge1xuICAgICAgLy8gSW5pdGlhbCBzaWduIGluXG4gICAgICBpZiAoYWNjb3VudCAmJiB1c2VyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4udG9rZW4sXG4gICAgICAgICAgYWNjZXNzVG9rZW46IHVzZXIuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgcmVmcmVzaFRva2VuOiB1c2VyLnJlZnJlc2hUb2tlbixcbiAgICAgICAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgICAgICAgY29tcGFueTogdXNlci5jb21wYW55LFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiBwcmV2aW91cyB0b2tlbiBpZiB0aGUgYWNjZXNzIHRva2VuIGhhcyBub3QgZXhwaXJlZCB5ZXRcbiAgICAgIHJldHVybiB0b2tlblxuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIC8vIFNlbmQgcHJvcGVydGllcyB0byB0aGUgY2xpZW50XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zZXNzaW9uLFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgLi4uc2Vzc2lvbi51c2VyLFxuICAgICAgICAgIGlkOiB0b2tlbi5zdWIsXG4gICAgICAgICAgcm9sZTogdG9rZW4ucm9sZSxcbiAgICAgICAgICBjb21wYW55OiB0b2tlbi5jb21wYW55LFxuICAgICAgICB9LFxuICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW4uYWNjZXNzVG9rZW4sXG4gICAgICB9XG4gICAgfSxcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46ICcvbG9naW4nLFxuICB9LFxuICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcsXG59IHNhdGlzZmllcyBOZXh0QXV0aENvbmZpZ1xuXG5leHBvcnQgY29uc3QgeyBoYW5kbGVycywgYXV0aCwgc2lnbkluLCBzaWduT3V0IH0gPSBOZXh0QXV0aChjb25maWcpICJdLCJuYW1lcyI6WyJOZXh0QXV0aCIsIkNyZWRlbnRpYWxzIiwiR29vZ2xlIiwiY29uZmlnIiwicHJvdmlkZXJzIiwiY2xpZW50SWQiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwibmFtZSIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJsYWJlbCIsInR5cGUiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJCQUNLRU5EX1VSTCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiZGF0YSIsImpzb24iLCJpZCIsInVzZXIiLCJyb2xlIiwiY29tcGFueSIsImFjY2Vzc1Rva2VuIiwidG9rZW5zIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaFRva2VuIiwicmVmcmVzaF90b2tlbiIsImVycm9yIiwiY29uc29sZSIsInNlc3Npb24iLCJzdHJhdGVneSIsIm1heEFnZSIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwiYWNjb3VudCIsInN1YiIsInBhZ2VzIiwic2lnbkluIiwiZGVidWciLCJoYW5kbGVycyIsImF1dGgiLCJzaWduT3V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./auth.ts\n");

/***/ })

});